// Rotating music note animation - 16 frames
// Each frame is 25x25 pixels
// Memory usage: ~1600 bytes

// Frame 0 - 0°
const unsigned char musicNote_0_xbm[] PROGMEM = {
   0x00, 0xf0, 0x1f, 0x00, 0x00, 0xf0, 0x1f, 0x00, 0x00, 0xf0, 0x1f, 0x00,
   0x00, 0xf0, 0x1f, 0x00, 0x00, 0xf0, 0x1f, 0x00, 0x00, 0xf0, 0x1f, 0x00,
   0x00, 0xf0, 0x1f, 0x00, 0x00, 0xf0, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00,
   0x00, 0xf0, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00,
   0x00, 0xf0, 0x00, 0x00, 0x80, 0xff, 0x00, 0x00, 0xc0, 0xff, 0x00, 0x00,
   0xe0, 0xff, 0x00, 0x00, 0xe0, 0xff, 0x00, 0x00, 0xf0, 0xff, 0x00, 0x00,
   0xf0, 0xff, 0x00, 0x00, 0xf0, 0xff, 0x00, 0x00, 0xf0, 0xff, 0x00, 0x00,
   0xf0, 0x7f, 0x00, 0x00, 0xe0, 0x7f, 0x00, 0x00, 0xc0, 0x3f, 0x00, 0x00,
   0x80, 0x1f, 0x00, 0x00
};

// Frame 1 - 22.5°
const unsigned char musicNote_1_xbm[] PROGMEM = {
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 0x00, 0x3f, 0x00,
   0x00, 0x00, 0xff, 0x00, 0x00, 0x80, 0xff, 0x01, 0x00, 0x80, 0xff, 0x01,
   0x00, 0x80, 0xff, 0x00, 0x00, 0xc0, 0xff, 0x00, 0x00, 0xc0, 0xff, 0x00,
   0x00, 0xe0, 0x73, 0x00, 0x00, 0xe0, 0x01, 0x00, 0xc0, 0xe1, 0x01, 0x00,
   0xe0, 0xff, 0x00, 0x00, 0xf8, 0xff, 0x00, 0x00, 0xf8, 0xff, 0x00, 0x00,
   0xfc, 0x7f, 0x00, 0x00, 0xfc, 0x7f, 0x00, 0x00, 0xfe, 0x3f, 0x00, 0x00,
   0xfc, 0x3f, 0x00, 0x00, 0xf8, 0x3f, 0x00, 0x00, 0xfc, 0x1f, 0x00, 0x00,
   0xf8, 0x0f, 0x00, 0x00, 0xe0, 0x07, 0x00, 0x00, 0x80, 0x01, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00
};

// Frame 2 - 45°
const unsigned char musicNote_2_xbm[] PROGMEM = {
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0xf8, 0x00,
   0x00, 0x00, 0xfc, 0x01, 0x00, 0x00, 0xfe, 0x01, 0x00, 0x00, 0xff, 0x01,
   0xe0, 0x83, 0xff, 0x01, 0xf8, 0xc7, 0xff, 0x01, 0xfc, 0xef, 0xf7, 0x01,
   0xfe, 0xff, 0xe3, 0x01, 0xfe, 0xff, 0xc1, 0x00, 0xff, 0xff, 0x00, 0x00,
   0xfe, 0x7f, 0x00, 0x00, 0xfe, 0x3f, 0x00, 0x00, 0xfe, 0x1f, 0x00, 0x00,
   0xfc, 0x0f, 0x00, 0x00, 0xf8, 0x07, 0x00, 0x00, 0xf0, 0x02, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00
};

// Frame 3 - 67.5°
const unsigned char musicNote_3_xbm[] PROGMEM = {
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x20, 0x00, 0x00, 0x00, 0xf8, 0x03, 0x00, 0x01, 0xfe, 0x07, 0xe0, 0x01,
   0xfe, 0x0f, 0xf8, 0x01, 0xfe, 0x0f, 0xff, 0x01, 0xff, 0xcf, 0xff, 0x01,
   0xff, 0xff, 0xff, 0x01, 0xff, 0xff, 0xff, 0x01, 0xfe, 0xff, 0xf1, 0x01,
   0xfe, 0x7f, 0xe0, 0x01, 0xfe, 0x0f, 0xe0, 0x01, 0xf8, 0x03, 0x60, 0x00,
   0x90, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00
};

// Frame 4 - 90°
const unsigned char musicNote_4_xbm[] PROGMEM = {
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xf0, 0x01, 0x00, 0x00, 0xf8, 0x07, 0x00, 0x00,
   0xfc, 0x0f, 0x00, 0x00, 0xfe, 0x1f, 0x00, 0x00, 0xfe, 0x1f, 0x00, 0x00,
   0xfe, 0x1f, 0x00, 0x00, 0xfe, 0x1f, 0x00, 0x00, 0xfe, 0x1f, 0x00, 0x00,
   0xfe, 0xff, 0xff, 0x01, 0xfc, 0xff, 0xff, 0x01, 0xf8, 0xff, 0xff, 0x01,
   0xe0, 0xff, 0xff, 0x01, 0x00, 0x00, 0xf8, 0x01, 0x00, 0x00, 0xf8, 0x01,
   0x00, 0x00, 0xf8, 0x01, 0x00, 0x00, 0xf8, 0x01, 0x00, 0x00, 0xf8, 0x01,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00
};

// Frame 5 - 112.5°
const unsigned char musicNote_5_xbm[] PROGMEM = {
   0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0xa0, 0x07, 0x00, 0x00,
   0xf0, 0x1f, 0x00, 0x00, 0xf0, 0x1f, 0x00, 0x00, 0xf8, 0x3f, 0x00, 0x00,
   0xf8, 0x7f, 0x00, 0x00, 0xfc, 0x7f, 0x00, 0x00, 0xfc, 0x7f, 0x00, 0x00,
   0xf8, 0x3f, 0x00, 0x00, 0xf8, 0x3f, 0x00, 0x00, 0xf0, 0x3f, 0x00, 0x00,
   0xe0, 0x3f, 0x00, 0x00, 0xc0, 0xff, 0x01, 0x00, 0x00, 0xfe, 0x07, 0x00,
   0x00, 0xf8, 0x3f, 0x00, 0x00, 0xc0, 0xff, 0x00, 0x00, 0x00, 0xff, 0x01,
   0x00, 0x00, 0xfe, 0x01, 0x00, 0x00, 0xfe, 0x00, 0x00, 0x00, 0xff, 0x00,
   0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x7f, 0x00, 0x00, 0x00, 0x7e, 0x00,
   0x00, 0x00, 0x30, 0x00
};

// Frame 6 - 135°
const unsigned char musicNote_6_xbm[] PROGMEM = {
   0x00, 0x08, 0x00, 0x00, 0x00, 0x3f, 0x00, 0x00, 0x80, 0x7f, 0x00, 0x00,
   0xc0, 0xff, 0x00, 0x00, 0xe0, 0xff, 0x00, 0x00, 0xe0, 0xff, 0x01, 0x00,
   0xe0, 0xff, 0x01, 0x00, 0xe0, 0xff, 0x01, 0x00, 0xc0, 0xff, 0x01, 0x00,
   0xe0, 0xff, 0x01, 0x00, 0xc0, 0xff, 0x00, 0x00, 0x80, 0x7f, 0x00, 0x00,
   0x00, 0x3f, 0x00, 0x00, 0x00, 0x7e, 0x00, 0x00, 0x00, 0xfc, 0x00, 0x00,
   0x00, 0xf8, 0x01, 0x00, 0x00, 0xf0, 0x03, 0x00, 0x00, 0xe0, 0x07, 0x00,
   0x00, 0xc0, 0x0f, 0x00, 0x00, 0x80, 0x1f, 0x00, 0x00, 0xc0, 0x3f, 0x00,
   0x00, 0xe0, 0x7f, 0x00, 0x00, 0xf0, 0x3f, 0x00, 0x00, 0xf0, 0x1f, 0x00,
   0x00, 0xe0, 0x0f, 0x00
};

// Frame 7 - 157.5°
const unsigned char musicNote_7_xbm[] PROGMEM = {
   0x00, 0x70, 0x00, 0x00, 0x00, 0xfe, 0x03, 0x00, 0x00, 0xfe, 0x03, 0x00,
   0x00, 0xff, 0x07, 0x00, 0x80, 0xff, 0x07, 0x00, 0x00, 0xff, 0x0f, 0x00,
   0x00, 0xff, 0x07, 0x00, 0x80, 0xff, 0x07, 0x00, 0x00, 0xff, 0x07, 0x00,
   0x00, 0xff, 0x07, 0x00, 0x00, 0xfe, 0x03, 0x00, 0x00, 0xfe, 0x01, 0x00,
   0x00, 0x3c, 0x00, 0x00, 0x00, 0x3c, 0x00, 0x00, 0x00, 0x7c, 0x00, 0x00,
   0x00, 0x78, 0x00, 0x00, 0x00, 0xf8, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00,
   0x00, 0xf0, 0x00, 0x00, 0x00, 0xf0, 0x01, 0x00, 0x00, 0xf8, 0x01, 0x00,
   0x00, 0xff, 0x03, 0x00, 0x00, 0xff, 0x03, 0x00, 0x00, 0xfe, 0x03, 0x00,
   0x00, 0xfe, 0x07, 0x00
};

// Frame 8 - 180°
const unsigned char musicNote_8_xbm[] PROGMEM = {
   0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0x07, 0x00, 0x00, 0xf0, 0x0f, 0x00,
   0x00, 0xf8, 0x1f, 0x00, 0x00, 0xf8, 0x3f, 0x00, 0x00, 0xfc, 0x3f, 0x00,
   0x00, 0xfc, 0x3f, 0x00, 0x00, 0xfc, 0x3f, 0x00, 0x00, 0xfc, 0x3f, 0x00,
   0x00, 0xfc, 0x1f, 0x00, 0x00, 0xfc, 0x1f, 0x00, 0x00, 0xfc, 0x0f, 0x00,
   0x00, 0xfc, 0x07, 0x00, 0x00, 0x3c, 0x00, 0x00, 0x00, 0x3c, 0x00, 0x00,
   0x00, 0x3c, 0x00, 0x00, 0x00, 0x3c, 0x00, 0x00, 0x00, 0x3c, 0x00, 0x00,
   0x00, 0x3c, 0x00, 0x00, 0xe0, 0x3f, 0x00, 0x00, 0xe0, 0x3f, 0x00, 0x00,
   0xe0, 0x3f, 0x00, 0x00, 0xe0, 0x3f, 0x00, 0x00, 0xe0, 0x3f, 0x00, 0x00,
   0xe0, 0x3f, 0x00, 0x00
};

// Frame 9 - 202.5°
const unsigned char musicNote_9_xbm[] PROGMEM = {
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x00,
   0x00, 0x80, 0x1f, 0x00, 0x00, 0xc0, 0x7f, 0x00, 0x00, 0xe0, 0xff, 0x00,
   0x00, 0xf0, 0x7f, 0x00, 0x00, 0xf0, 0xff, 0x00, 0x00, 0xf0, 0xff, 0x01,
   0x00, 0xf8, 0xff, 0x00, 0x00, 0xf8, 0xff, 0x00, 0x00, 0xfc, 0x7f, 0x00,
   0x00, 0xfc, 0x7f, 0x00, 0x00, 0xfc, 0x1f, 0x00, 0x00, 0x1e, 0x0e, 0x00,
   0x00, 0x1e, 0x00, 0x00, 0x38, 0x1f, 0x00, 0x00, 0xfc, 0x0f, 0x00, 0x00,
   0xfc, 0x0f, 0x00, 0x00, 0xfc, 0x07, 0x00, 0x00, 0xfe, 0x07, 0x00, 0x00,
   0xfe, 0x07, 0x00, 0x00, 0xfc, 0x03, 0x00, 0x00, 0xf0, 0x03, 0x00, 0x00,
   0x80, 0x01, 0x00, 0x00
};

// Frame 10 - 225°
const unsigned char musicNote_10_xbm[] PROGMEM = {
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3d, 0x00,
   0x00, 0x80, 0x7f, 0x00, 0x00, 0xc0, 0xff, 0x00, 0x00, 0xe0, 0xff, 0x01,
   0x00, 0xf0, 0xff, 0x01, 0x00, 0xf8, 0xff, 0x01, 0x00, 0xfc, 0xff, 0x01,
   0x0c, 0xfe, 0xff, 0x01, 0x1e, 0xff, 0xff, 0x01, 0xbf, 0xdf, 0xff, 0x00,
   0xff, 0x8f, 0x7f, 0x00, 0xff, 0x07, 0x1f, 0x00, 0xff, 0x03, 0x00, 0x00,
   0xff, 0x01, 0x00, 0x00, 0xfe, 0x00, 0x00, 0x00, 0x7c, 0x00, 0x00, 0x00,
   0x38, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00
};

// Frame 11 - 247.5°
const unsigned char musicNote_11_xbm[] PROGMEM = {
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x24, 0x00, 0x18, 0x00, 0x7f, 0x00,
   0x1e, 0xc0, 0xff, 0x01, 0x1f, 0xf8, 0xff, 0x01, 0x3f, 0xfe, 0xff, 0x01,
   0xff, 0xff, 0xff, 0x01, 0xff, 0xff, 0xff, 0x01, 0xff, 0xcf, 0xff, 0x01,
   0xff, 0xc3, 0xff, 0x01, 0x7f, 0xc0, 0xff, 0x01, 0x1e, 0x80, 0xff, 0x01,
   0x02, 0x00, 0x7f, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00
};

// Frame 12 - 270°
const unsigned char musicNote_12_xbm[] PROGMEM = {
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7f, 0x00, 0x00, 0x00,
   0x7f, 0x00, 0x00, 0x00, 0x7f, 0x00, 0x00, 0x00, 0x7f, 0x00, 0x00, 0x00,
   0x7f, 0x00, 0x00, 0x00, 0xff, 0xff, 0x1f, 0x00, 0xff, 0xff, 0x7f, 0x00,
   0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x01, 0x00, 0xe0, 0xff, 0x01,
   0x00, 0xe0, 0xff, 0x01, 0x00, 0xe0, 0xff, 0x01, 0x00, 0xe0, 0xff, 0x01,
   0x00, 0xe0, 0xff, 0x01, 0x00, 0xc0, 0xff, 0x00, 0x00, 0x80, 0x7f, 0x00,
   0x00, 0x00, 0x3e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00
};

// Frame 13 - 292.5°
const unsigned char musicNote_13_xbm[] PROGMEM = {
   0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0xf8, 0x01, 0x00, 0x00,
   0xf8, 0x03, 0x00, 0x00, 0xfc, 0x03, 0x00, 0x00, 0xfc, 0x03, 0x00, 0x00,
   0xfc, 0x01, 0x00, 0x00, 0xfe, 0x01, 0x00, 0x00, 0xfe, 0x03, 0x00, 0x00,
   0xfc, 0x0f, 0x00, 0x00, 0xf0, 0x7f, 0x00, 0x00, 0x80, 0xff, 0x01, 0x00,
   0x00, 0xfe, 0x0f, 0x00, 0x00, 0xf0, 0x1f, 0x00, 0x00, 0xf0, 0x3f, 0x00,
   0x00, 0xf0, 0x7f, 0x00, 0x00, 0xf0, 0x7f, 0x00, 0x00, 0xf8, 0xff, 0x00,
   0x00, 0xf8, 0xff, 0x00, 0x00, 0xf8, 0x7f, 0x00, 0x00, 0xf0, 0x7f, 0x00,
   0x00, 0xe0, 0x3f, 0x00, 0x00, 0xe0, 0x3f, 0x00, 0x00, 0x80, 0x17, 0x00,
   0x00, 0x00, 0x02, 0x00
};

// Frame 14 - 315°
const unsigned char musicNote_14_xbm[] PROGMEM = {
   0x80, 0x0f, 0x00, 0x00, 0xc0, 0x1f, 0x00, 0x00, 0xe0, 0x3f, 0x00, 0x00,
   0xf0, 0x3f, 0x00, 0x00, 0xf8, 0x1f, 0x00, 0x00, 0xf0, 0x0f, 0x00, 0x00,
   0xe0, 0x07, 0x00, 0x00, 0xc0, 0x0f, 0x00, 0x00, 0x80, 0x1f, 0x00, 0x00,
   0x00, 0x3f, 0x00, 0x00, 0x00, 0x7e, 0x00, 0x00, 0x00, 0xfc, 0x00, 0x00,
   0x00, 0xf8, 0x01, 0x00, 0x00, 0xf0, 0x03, 0x00, 0x00, 0xf8, 0x07, 0x00,
   0x00, 0xfc, 0x0f, 0x00, 0x00, 0xfe, 0x1f, 0x00, 0x00, 0xfe, 0x0f, 0x00,
   0x00, 0xfe, 0x1f, 0x00, 0x00, 0xfe, 0x1f, 0x00, 0x00, 0xfe, 0x1f, 0x00,
   0x00, 0xfc, 0x1f, 0x00, 0x00, 0xfc, 0x0f, 0x00, 0x00, 0xf8, 0x07, 0x00,
   0x00, 0xf0, 0x03, 0x00
};

// Frame 15 - 337.5°
const unsigned char musicNote_15_xbm[] PROGMEM = {
   0x00, 0xfe, 0x00, 0x00, 0x80, 0xff, 0x01, 0x00, 0x00, 0xff, 0x01, 0x00,
   0x00, 0xff, 0x03, 0x00, 0x00, 0xff, 0x03, 0x00, 0x00, 0x7e, 0x00, 0x00,
   0x00, 0x3e, 0x00, 0x00, 0x00, 0x3c, 0x00, 0x00, 0x00, 0x3c, 0x00, 0x00,
   0x00, 0x7c, 0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x00, 0xf8, 0x00, 0x00,
   0x00, 0xf0, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00, 0x00, 0xfe, 0x01, 0x00,
   0x00, 0xff, 0x01, 0x00, 0x80, 0xff, 0x03, 0x00, 0x80, 0xff, 0x03, 0x00,
   0x80, 0xff, 0x07, 0x00, 0x80, 0xff, 0x03, 0x00, 0xc0, 0xff, 0x03, 0x00,
   0x80, 0xff, 0x07, 0x00, 0x80, 0xff, 0x03, 0x00, 0x00, 0xff, 0x01, 0x00,
   0x00, 0xff, 0x01, 0x00
};

// Array of frame pointers for easy animation
const unsigned char* musicNote_frames[] PROGMEM = {
   musicNote_0_xbm,
   musicNote_1_xbm,
   musicNote_2_xbm,
   musicNote_3_xbm,
   musicNote_4_xbm,
   musicNote_5_xbm,
   musicNote_6_xbm,
   musicNote_7_xbm,
   musicNote_8_xbm,
   musicNote_9_xbm,
   musicNote_10_xbm,
   musicNote_11_xbm,
   musicNote_12_xbm,
   musicNote_13_xbm,
   musicNote_14_xbm,
   musicNote_15_xbm
};

// Animation helper
extern U8G2_SH1106_128X64_NONAME_F_HW_I2C u8g2;

#define MUSIC_NOTE_FRAMES 16
int currentFrame = 0;
int noteH = 25, noteW = 25;

// animation speed in ms per frame (lower = faster)
unsigned long frameInterval = 120; 
unsigned long lastFrameTime = 0;

void drawRotatingMusicNote(int x, int y, bool playAnim) {
   u8g2.drawXBM(
      x, y, noteW, noteH,
      (const unsigned char*)pgm_read_ptr(&musicNote_frames[currentFrame])
   );

   // play animation only when music is playing, freeze otheriwse
   if (playAnim) {
      unsigned long now = millis();
      if (now - lastFrameTime >= frameInterval) {
         currentFrame = (currentFrame + 1) % MUSIC_NOTE_FRAMES;
         lastFrameTime = now;
      }
   }
}